FactoryBot.define do
  sequence(:email) { |n| "user#{n}@example.com" }
  sequence(:days, 1)

  factory :user do
    email
    admin { false }

    trait :admin do
      admin { true }
    end
  end

  factory :timespan do
    transient do
      n_days { generate(:days) }
    end
    start { n_days.days.ago.midnight }
    in_seconds { Timespan::DAY_DURATION }
    after(:build) do |timespan, evaluator|
      timespan.name = "#{evaluator.n_days} days ago"
    end
  end

  factory :cohort_summary do
    cohort
    timespan
  end

  factory :cohort_comparison do
    cohort_a factory: :cohort
    timespan_a factory: :timespan
    cohort_b factory: :cohort
    timespan_b factory: :timespan
  end

  factory :cohort do
    twitter_ids { [14706139] }  # @BKCHarvard's twitter id
    description { 'Berkman Klein Center for Internet & Society' }
    index_prefix { 'bkc_' }

    factory :crazy_cohort do
      twitter_ids { [
        785721, 7418782, 13695792, 14522055, 17107705, 17257498, 17861740,
        19062153, 20256635, 21814654, 21920585, 23263623, 24319446, 26131385,
        26143197, 26868187, 27202732, 27313635, 27938485, 27948914, 28685610,
        29019463, 29765351, 30989204, 31547253, 33539810, 34969790, 34973241,
        38006071, 39750769, 41620937, 41786553, 42048593, 42766540, 43105114,
        43791278, 44852237, 44852840, 45525257, 47347200, 48293159, 48389953,
        49439336, 50479275, 50945600, 51784394, 54255738, 54388730, 57317618,
        59503980, 60130001, 61986029, 62379197, 62978764, 63262247, 65859398,
        65956948, 66247511, 67947482, 70094279, 73681562, 81556930, 95167002,
        97315486, 99568665, 103148626, 105693194, 107352856, 107431086,
        110350272, 116057531, 118391399, 118619214, 127685926, 132865395,
        137715875, 138628211, 138998817, 143639163, 144400178, 145552247,
        145606801, 149527508, 154537647, 156389246, 176406752, 198238063,
        200681737, 202862896, 206138355, 207134017, 208627386, 211867530,
        216272648, 218815505, 233551119, 233623410, 239849017, 239874064,
        240228916, 244610526, 245588533, 251380256, 251869750, 254705800,
        254855661, 255637301, 261938462, 262880250, 264554662, 277599445,
        289119282, 292963630, 295419478, 296561082, 312296549, 316183794,
        317927128, 319168528, 327593426, 328153354, 330636420, 331276809,
        331777249, 339416745, 344381160, 346304936, 350815280, 358998314,
        363286107, 363778131, 366385121, 379340889, 388447588, 389851669,
        396189457, 402441655, 420030851, 429139964, 429497740, 433032941,
        434685146, 436702624, 446132609, 455101757, 462642463, 463167857,
        475495715, 480967183, 485000277, 514840946, 523419319, 533925202,
        534329922, 540106220, 557374185, 565188105, 565537758, 568630029,
        572755259, 573125320, 573178056, 595886688, 607717327, 618973743,
        712976695, 732075319, 733717446, 756194684, 791964055, 798746312,
        799326259, 815391518, 842030432, 862709510, 863693653, 874727256,
        885854593, 901867723, 907173792, 932590334, 951343968, 963901478,
        964839810, 997955004, 1023763885, 1027064312, 1027345652, 1042657574,
        1080486230, 1090950572, 1097220595, 1115490384, 1180954380, 1251376782,
        1253587788, 1255120992, 1296455090, 1323255176, 1323670471, 1325697936,
        1337409841, 1352160121, 1365507552, 1368332677, 1441390458, 1453180627,
        1473523987, 1475038004, 1497077804, 1499573666, 1535536627, 1560960978,
        1588260103, 1599739404, 1603628994, 1604800746, 1657534208, 1673163889,
        1871830236, 1936228795, 2175446482, 2188630783, 2191560925, 2207330157,
        2214933655, 2241538628, 2259362094, 2275549626, 2321136587, 2324595245,
        2333691750, 2353419038, 2358353479, 2365828291, 2366303900, 2418633566,
        2465479882, 2473147916, 2528024448, 2567350675, 2571492782, 2652300870,
        2730019374, 2757833205, 2774375779, 2790755905, 2815575734, 2826768270,
        2831925222, 2834596786, 2866672857, 2986014090, 2989404656, 3065235243,
        3102929192, 3138381354, 3142954274, 3160070192, 3235400474, 3296039808,
        3308167514, 3310883197, 3319379375, 3356837416, 3381299860, 3390093695,
        3791999234, 3795104652, 3992602272, 4033466614, 4037475449, 4138092921,
        4160890222, 4310153967, 4332339675, 4394918361, 4399676801, 4600705881,
        4697604914, 4700267755, 4837618411, 4854691685, 4899494693,
        701860809417228289, 702367729588768768, 705269873987833856,
        706733903999008769, 707445138277146624, 708520564584013824,
        710919779507380224, 713768020284301312, 716816690185523200,
        717471232082444290, 723303561140928512, 726081348738277376,
        738509183952113664, 741567239019761664, 742403393939902465,
        745678876672679936, 745681473416605696, 750285440339603456,
        757078971590651904, 759173934268887040, 759570488767184897,
        760544357669859328, 761843462081830913, 767089219214770176,
        769192599852765184, 772302763166281728, 777020965754515456,
        778606887394762758, 781901959741800449, 782083003950460928,
        783438469536231424, 784104604883714049, 784880874206617600,
        785843022001016833, 786329417261780992, 786358206553403392,
        786596449060397056, 786629464713199616, 786629630732013568,
        786712691880693760, 788153726611623936, 788831920452882432,
        790705621142233089, 793903916089909248, 795697168350871552,
        796152335236001792, 799780363543396352, 804814290653876224,
        806512303629860868, 806589207594618880, 806993211692552193,
        808729817751359492, 810788174368804864, 812062770053136385,
        814729065542258688, 815265808494555136, 816568995398746112,
        817094637009649665, 817508377702072320, 818551392403070977,
        818993306042404864, 820082289749225472, 820148251693346817,
        822510517466042370, 822854319158366208, 823204132798480385,
        824640607704535040, 825122520638570497, 825680314576097281,
        826147428478881794, 826275819458850817, 826593442193145856,
        826808225395830785, 827726825262452737, 829441258275819520,
        831628691646062592, 832792410178457602, 837217888801079297,
        838400763395112961, 839210200389279744, 840820054514106368,
        842348065109495809, 846180912098430976, 848534305345294336,
        859465333563772928, 860629313800081409, 863228507110768640,
        866684864262746112, 867842479738900480, 870171960990466048,
        870812241645273089, 874058687526182912, 875741011120664576,
        875924615901720576, 876249932524650500, 879070431847870464,
        881991975922262016, 882694664222109704, 884041567262191617,
        885329211266748416, 890102168228909056, 892857793392201729,
        894349049905766401, 894746377015525376, 895763221843456001,
        898658820142006272, 900724656314793985, 903822550760792064,
        909838315104428032, 911492196645212160, 913793576592691202,
        917159398182600704, 920829553609551872, 925774387638358016,
        932106140703514625, 939110802086391808, 947149996503289856,
        951078925056307200, 953357513755373568, 954519197811445761,
        955647278928216064, 956814655380475904, 958081152748871680,
        958424768360804352, 958867777670008833, 959528125809004545,
        960189337320161281, 961754462921641984, 965206195597381632,
        970728391317041153, 971009578195447808, 973825691102990337,
        991401600135647234, 1001897376158806016, 1003426899882737664,
        1005860336317222912, 1007046270345711616, 1014631214282444800,
        1018980612017926144, 1019132728174874625, 1023537557378924546,
        1025192466092314630, 1026385323104890880, 1032233896337960960,
        1036796603661774848, 1037891005582848000, 1038963081316114432,
        1040058357896413184, 1041031825056034816, 1050871944399089664,
        1052361277522239491, 1053293164075790336, 1063111596434710528,
        1072134244598730752, 1072344028346077185, 1073008957839396864,
        1075008512101703680, 1082755577812533248, 1083817622968389638,
        1084873010056753152, 1088122630471847937, 1090248503954206721,
        1090958724796014592, 1093184398181220352, 1094367646836056064,
        1095165528514142208, 1096820876463476736, 1097186173565485058,
        1098402437495382023, 1105857454066143233, 1107196806398689280,
        1111280591897591810, 1111347420779159553, 1117520324780875776,
        1120435126406508544, 1120763028184674305, 1120780779506651137,
        1123680822064754688, 1126803314841214978, 1130661180610007042,
        1131140489736966144, 1135077462881243137, 1136150643070996480,
        1150810140947431425, 1157692151230291969, 1160203722032656389,
        1160875269923753984, 1164442313944260608, 1165796436719521792,
        1166581162975870977, 1166981937417900032, 1167149474621378561,
        1167402970838945792, 1168543238678032384, 1174047588640645121,
        1175147756953882624, 1177373437024755714, 1178841206505295873,
        1179243266635685888, 1179518066868281345, 1182329017552293889,
        1185564757530685440, 1194789706187313153, 1196586089177325570,
        1196848891439845378, 1202408978061377536, 1202965789919330304,
        1203344972176592897, 1203660379198496768, 1204775823615692810,
        1206694000964583424, 1207228225971093504, 1209439452071751680,
        1210578850406518790, 1212090325256175616, 1213075261748441089,
        1213477968489484288, 1213536452744597504, 1219438788344086528,
        1220213455287996416, 1220411311877697536, 1220582277924569088,
        1221502535057362944, 1221851926033244160, 1222849833456865280,
        1224110865433202689, 1224388265148473345, 1224894077466021897,
        1225158866050146305, 1225165990448771072, 1225893112775659520,
        1226342889531285504, 1226954827349057541, 1227562759379996677,
        1228391046788403200, 1228770615370317824, 1230323919707627520,
        1230858194181918720, 1231363136181145600, 1236031448101974016,
        1236351699071180800, 1238162650145665024, 1238337211428372480,
        1239177524103561216, 1240358022297407489, 1240391254522753025,
        1240794456623898630, 1241221055575756800, 1241905847703240706,
        1241924859577479169, 1241948143362535425, 1243226559365943296,
        1243930420372279296, 1244200775171047430, 1245098348970999810,
        1245351424122290177, 1246174656844959752, 1246628398958440448,
        1247550386275266563, 1247957839466967043, 1248050827677351948,
        1248632211940786179, 1249470976451997696, 1249846663759507457,
        1251492401916461059, 1253071138831380488, 1253971839631732736,
        1254644467581235203, 1255239643345358850, 1255485437659013120,
        1256632035247976448, 1256739786699624449, 1257821465409396742,
        1258764370898759680, 1259021061380808705, 1259123904213286913,
        1259849263422586881, 1259888374028161026, 1260036732847656962,
        1260371670902194178, 1263026858905366528, 1264008553846550528,
        1265082677646016523, 1265123045691154432, 1266358743526043648,
        1266539429633515522, 1266775628176437248, 1267088931029475329,
        1267469085064998912, 1267993063621681154, 1268038751567085568,
        1269070330213142529, 1270413101477871616, 1271510965050388480,
        1271927168415784960, 1272212695765450753, 1272882445357113346,
        1275832774809620480, 1276471612393639936, 1277330508645629962,
        1277770261341720577, 1277847953395326977, 1278360213406564354,
        1278527680963653632, 1278875172381102081, 1278907828141322241,
        1282183148663500800, 1284450974677909504
      ] }
      description { 'Far-right Conspiracy Folks' }
      index_prefix { 'conspiracy_' }
    end

    factory :big_cohort do
      twitter_ids { [
        15725659, 17818707, 17828043, 21784951, 24573163, 25101996, 25837289,
        26585993, 36529101, 36965034, 41634520, 45676731, 50521292, 58307367,
        60403024, 61015628, 87229567, 113419371, 117586190, 145089042,
        146569971, 200188892, 208750348, 216900745, 270574910, 277617220,
        341194704, 346704649, 350017434, 375247545, 380461065, 461748408,
        469692993, 489617322, 509216372, 577680739, 718187712, 757832485,
        763795873, 790789351, 833468408, 851631150, 885764952, 996328988,
        1282247383, 1283814870, 1345295474, 1418395501, 1729894669, 2363238127,
        2411937235, 2442285438, 2496338378, 2571039008, 2840299862, 2869945816,
        2891140480, 2910903323, 2921619869, 2946840593, 2947106835, 3029181299,
        3042177804, 3073331062, 3202132869, 3225677970, 3308233864, 3403484751,
        3414192616, 3416700730, 3422183081, 4239908111, 705857306437615616,
        729647122451189760, 729676086632656900, 730063238600208385,
        741006303091429376, 748542428710211585, 756338966949949440,
        756547088717053954, 760308577089171456, 762038178588925952,
        769345952725536768, 779152489664753666, 788065402970603521,
        802527219071545344, 803307923220955136, 813086461180444672,
        822446191266803712, 823197859264610304, 881244173524926464,
        890767044202901505, 905940784746299392, 906242823598489600,
        908129693123186690, 920382948267868160, 928298360829865984,
        931571805193633794, 969294436067811328, 969607136488673280,
        974997176077225984, 984091139308388354, 1010622604804120576,
        1026476544942919681, 1033395463838412800, 1044712291772649473,
        1046880646075801601, 1047838024753532931, 1055977988381204482,
        1072224508793245701, 1081960812485459969, 1088116343604477952,
        1091541966465187840, 1110186799949930497, 1113418983791837184,
        1121372487252631552, 1125263444993806336, 1131548575589179392,
        1132425720716644353, 1150766603988025347, 1150767028275417088,
        1151303982507315200, 1153749412360986625, 1154872659966124033,
        1163591244053766145, 1163886641649541120, 1170740095965704192,
        1176528067126317057, 1176537333807681538, 1177720894996832256,
        1178019002825637889, 1178395104731635714, 1178804467984154630,
        1179034654294196226, 1185665866387591169, 1186708235002109952,
        1187849311914213376, 1188442576732545024, 1188625746144698375,
        1190760875055046656, 1192833939481776128, 1194974698595143680,
        1195385837011292160, 1195430957635047424, 1195752900846379010,
        1198989562552496128, 1199358840527106049, 1202555429387210753,
        1207381960311656449, 1213575571055054853, 1214270078344056832,
        1215737630589181957, 1216382463145963522, 1217942261331300353,
        1217964170475425797, 1219413509089394692, 1219798625536049154,
        1221073628843986945, 1223359554240598017, 1227603370380120064,
        1229941356966993920, 1235954589049991168, 1237938964121686021,
        1238995126359212033, 1241880549133889536, 1242185034909564932,
        1242339018832056321, 1242438356522369024, 1243945158892273664,
        1245826388260556800, 1246575590196441088, 1247725362936774658,
        1249930421048995842, 1250100439846133763, 1250936605470347265,
        1251857449591635974, 1254071094262276096, 1254784257035100165,
        1256008243282882562, 1257506490946068481, 1257797801087586306,
        1258362022372216833, 1258381065812615169, 1258408197208997888,
        1258465515850227712, 1259828247606562816, 1260049349880446976,
        1261019141378539523, 1262089226151178246, 1262096036828495873,
        1263483499115413504, 1263547144402866177, 1264657558834470921,
        1265329644255010819, 1265745020906278912, 1265793962717167618,
        1267167662448300033, 1267255649311883265, 1267610581508542465,
        1267611009965002754, 1267954946571333634, 1274749741784543233,
        1274818333867728898
      ] }
      description { 'Early Trump sharers' }
      index_prefix { 'early_trump_' }
    end
  end
end
